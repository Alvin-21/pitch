{% extends 'base.html' %}

{% block content %}

<section class="container">
    <h2>Welcome to {{category}}</h2>
    <a class="btn btn-info text-center" href="/pitches/new">
        <span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Post a Pitch
    </a>
    <hr>
    <h3>Pitches</h3>
    {% for pitch in pitches %}
    <div class="card text-white bg-info mb-3">
        <div class="card-body">
            <h5 class="card-title">{{pitch.pitch_username}}</h5>
            <p class='card-text'>{{pitch.description}}</p>
            <p class="card-text"><small class="text-muted">Posted on {{pitch.time.strftime('%d/%m/%Y %X')}}</small></p>
        </div>
        <div class="card-footer">
            <a href="{{url_for('main.like',pitch_id=pitch.id)}}" class= "btn btn-success btn-sm"><span class="glyphicon glyphicon-thumbs-up"></span>Like <span>{{pitch.likes.count()}}</span></a>
            <a href="{{url_for('main.dislike',pitch_id=pitch.id)}}" class= "btn btn-danger btn-sm"><span class="glyphicon glyphicon-thumbs-down"></span>Dislike <span>{{pitch.dislikes.count()}}</span></a>
            <a class="btn btn-dark btn-sm" href="{{url_for('main.view_pitch', pitch_id=pitch.id)}}">View Comments</a>
        </div>
    </div>
    {% endfor %}
</section>

{% endblock %}